<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>run_TIGER_internal — run_TIGER_internal • malbacR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="run_TIGER_internal — run_TIGER_internal"><meta property="og:description" content="Use TIGER algorithm to eliminate the technical variation in metabolomics data. TIGER supports targeted and untargeted metabolomics data and is competent to perform both intra- and inter-batch technical variation removal."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">malbacR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/malbacR_vignette_condensed_filtered.html">malbacR: A Vignette Pertaining to Pre-Filtered Data</a>
    </li>
    <li>
      <a href="../articles/malbacR_vignette_expanded_unfiltered.html">malbacR: A Vignette Pertaining to Unfiltered Data</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>run_TIGER_internal</h1>
    
    <div class="hidden name"><code>run_TIGER_internal.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use TIGER algorithm to eliminate the technical variation in metabolomics data. TIGER supports targeted and untargeted metabolomics data and is competent to perform both intra- and inter-batch technical variation removal.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_TIGER_internal</span><span class="op">(</span></span>
<span>  <span class="va">test_samples</span>,</span>
<span>  <span class="va">train_samples</span>,</span>
<span>  <span class="va">col_sampleID</span>,</span>
<span>  <span class="va">col_sampleType</span>,</span>
<span>  <span class="va">col_batchID</span>,</span>
<span>  col_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  col_position <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  targetVal_external <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  targetVal_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span><span class="op">)</span>,</span>
<span>  targetVal_batchWise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  targetVal_removeOutlier <span class="op">=</span> <span class="op">!</span><span class="va">targetVal_batchWise</span>,</span>
<span>  selectVar_external <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  selectVar_corType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cor"</span>, <span class="st">"pcor"</span><span class="op">)</span>,</span>
<span>  selectVar_corMethod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pearson"</span>, <span class="st">"spearman"</span><span class="op">)</span>,</span>
<span>  selectVar_minNum <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  selectVar_maxNum <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  selectVar_batchWise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mtry_percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  nodesize_percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  parallel.cores <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>test_samples</dt>
<dd><p>(required) a data.frame containing the samples to be corrected (for example, subject samples). This data.frame should contain columns of</p><ul><li><p>sample ID (required): name or label for each sample,</p></li>
<li><p>sample type (required): indicating the type of each sample,</p></li>
<li><p>batch ID (required): the batch of each sample,</p></li>
<li><p>order information (optional): injection order or temporal information of each sample,</p></li>
<li><p>position information (optional): well position of each sample,</p></li>
<li><p>metabolite values (required): values to be normalised. Infinite values are not allowed.</p></li>
</ul><p>Row: sample. Column: variable. See Examples.</p></dd>


<dt>train_samples</dt>
<dd><p>(required) a data.frame containing the quality control (QC) samples used for model training. The columns in this data.frame should correspond to the columns in <code>test_samples</code>. And <code>test_samples</code> and <code>train_samples</code> should have the identical column names.</p></dd>


<dt>col_sampleID</dt>
<dd><p>(required) a character string indicating the name of the column that specifies the sample ID of each sample. The values in this column will not affect the data correction process but can act as labels for different samples. See Examples.</p></dd>


<dt>col_sampleType</dt>
<dd><p>(required) a character string indicating the name of the column that specifies the type (such as QC1, QC2, subject) of each sample. This column can be used to indicate different kinds of QC samples in <code>train_samples</code>. QC samples of the <strong>same type</strong> should have the <strong>same type name</strong>. See Examples.</p></dd>


<dt>col_batchID</dt>
<dd><p>(required) a character string indicating the name of the column that specifies the batch ID of each sample. See Examples.</p></dd>


<dt>col_order</dt>
<dd><p>(optional) <code>NULL</code> or a character string indicating the name of the column that contains the injection order or temporal information (numeric values). This can explicitly ask the algorithm capture the technical variation introduced by injection order, which might be useful when your data have very obvious temporal drifts. If <code>NULL</code> (default), <code>train_samples</code> and <code>test_samples</code> should have <strong>No</strong> column contains injection order information.</p></dd>


<dt>col_position</dt>
<dd><p>(optional) <code>NULL</code> or a character string indicating the name of the column that contains the well position information (numeric values). This can explicitly ask the algorithm capture the technical variation introduced by well position, which might be useful when the well position has a great impact during data acquisition. If <code>NULL</code> (default), <code>train_samples</code> and <code>test_samples</code> should have <strong>No</strong> column contains well position information.</p></dd>


<dt>targetVal_external</dt>
<dd><p>(optional) a list generated by function <code><a href="compute_targetVal.html">compute_targetVal</a></code>. See Details.</p></dd>


<dt>targetVal_method</dt>
<dd><p>a character string specifying how target values are to be computed. Can be <code>"mean"</code> (default) or <code>"median"</code>. Ignored if a list of external target values has been assigned to  <code>targetVal_external</code>.</p></dd>


<dt>targetVal_batchWise</dt>
<dd><p>logical. If <code>TRUE</code>, the target values will be computed based on each batch, otherwise, based on the whole dataset. Setting <code>TRUE</code> might be useful if your dataset has very obvious batch effects, but this may also make the algorithm less robust. Default: <code>FALSE</code>. Ignored if a list of external target values has been assigned to  <code>targetVal_external</code>.</p></dd>


<dt>targetVal_removeOutlier</dt>
<dd><p>logical. If <code>TRUE</code>, outliers will be removed before the computation. Outliers are determined with 1.5 * IQR (interquartile range) rule. We recommend turning this off when the target values are computed based on batches. Default: <code>!targetVal_batchWise</code>. Ignored if a list of external target values has been assigned to  <code>targetVal_external</code>.</p></dd>


<dt>selectVar_external</dt>
<dd><p>(optional) a list generated by function <code><a href="select_variable.html">select_variable</a></code>. See Details.</p></dd>


<dt>selectVar_corType</dt>
<dd><p>a character string indicating correlation (<code>"cor"</code>, default) or partial correlation (<code>"pcor"</code>) is to be used. Can be abbreviated. Ignored if a list of selected variables has been assigned to <code>selectVar_external</code>. <strong>Note</strong>: computing partial correlations of a large dataset can be very time-consuming.</p></dd>


<dt>selectVar_corMethod</dt>
<dd><p>a character string indicating which correlation coefficient is to be computed. One of <code>"spearman"</code> (default) or <code>"pearson"</code>. Can be abbreviated. Ignored if a list of selected variables has been assigned to <code>selectVar_external</code>.</p></dd>


<dt>selectVar_minNum</dt>
<dd><p>an integer specifying the minimum number of the selected metabolite variables (injection order and well position are not regarded as metabolite variables). If <code>NULL</code>, no limited, but 1 at least. Default: <code>5</code>. Ignored if a list of selected variables has been assigned to <code>selectVar_external</code>.</p></dd>


<dt>selectVar_maxNum</dt>
<dd><p>an integer specifying the maximum number of the selected metabolite variables (injection order and well position are not regarded as metabolite variables). If <code>NULL</code>, no limited, but no more than the number of all available metabolite variables. Default: <code>10</code>. Ignored if a list of selected variables has been assigned to <code>selectVar_external</code>.</p></dd>


<dt>selectVar_batchWise</dt>
<dd><p>(advanced) logical. Specify whether the variable selection should be performed based on each batch. Default: <code>FALSE</code>. Ignored if a list of selected variables has been assigned to <code>selectVar_external</code>. <strong>Note</strong>: the support of batch-wise variable selection is provided for data requiring special processing (for example, data with strong batch effects). But in most case, batch-wise variable selection is not necessary. Setting <code>TRUE</code> can make the algorithm less robust.</p></dd>


<dt>mtry_percent</dt>
<dd><p>(advanced) a numeric vector indicating the percentages of selected variables randomly sampled as candidates at each split when training random forest models (base learners). <strong>Note</strong>: providing more arguments will include more base learners into the ensemble model, which will increase the processing time. Default: <code>seq(0.2, 0.8, 0.2)</code>.</p></dd>


<dt>nodesize_percent</dt>
<dd><p>(advanced) a numeric vector indicating the percentages of sample size used as the minimum sizes of the terminal nodes in random forest models (base learners). <strong>Note</strong>: providing more arguments will include more base learners into the ensemble model, which will increase the processing time. Default: <code>seq(0.2, 0.8, 0.2)</code>.</p></dd>


<dt>...</dt>
<dd><p>(advanced) optional arguments (except <code>mtry</code> and <code>nodesize</code>) to be passed to <code><a href="https://rdrr.io/pkg/randomForest/man/randomForest.html" class="external-link">randomForest</a></code> for model training. Arguments <code>mtry</code> and <code>nodesize</code> are determined by <code>mtry_percent</code> and <code>nodesize_percent</code>. See <code><a href="https://rdrr.io/pkg/randomForest/man/randomForest.html" class="external-link">randomForest</a></code> and Examples. <strong>Note</strong>: providing more arguments will include more base learners into the ensemble model, which will increase the processing time.</p></dd>


<dt>parallel.cores</dt>
<dd><p>an integer (== -1 or &gt;= 1) specifying the number of cores for parallel computation. Setting <code>-1</code> to run with all cores. Default: <code>2</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>return tiger batch corrected results</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Damon Leach, Kelly Stratton, Lisa Bramer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

